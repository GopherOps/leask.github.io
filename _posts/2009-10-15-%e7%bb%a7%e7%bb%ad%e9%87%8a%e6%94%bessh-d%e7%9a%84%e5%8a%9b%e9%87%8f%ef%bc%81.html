---
layout: post
status: publish
published: true
title: "继续释放ssh -D的力量！"
author:
  display_name: Leask
  login: leask
  email: i@leaskh.com
  url: http://www.leaskh.com
author_login: leask
author_email: i@leaskh.com
author_url: http://www.leaskh.com
wordpress_id: 62
wordpress_url: http://leaskh.wordpress.com/2009/10/15/%e7%bb%a7%e7%bb%ad%e9%87%8a%e6%94%bessh-d%e7%9a%84%e5%8a%9b%e9%87%8f%ef%bc%81
date: '2009-10-15 13:21:50 +0800'
date_gmt: '2009-10-15 13:21:50 +0800'
categories:
- Uncategorized
tags: []
comments: []
---
<div id="msgcns!15BAC1A170471DB!15023" class="bvMsg">
<p><img style="border-bottom:0;border-left:0;display:inline;border-top:0;border-right:0;" title="Screen shot 2009-10-15 at 9.09.52 PM" border="0" alt="Screen shot 2009-10-15 at 9.09.52 PM" src="http:&#47;&#47;www.leaskh.com&#47;wp-content&#47;uploads&#47;2010&#47;09&#47;screenshot2009-10-15at9.png?w=300" width="779" height="718" &#47;>
<p>虽然iSSH在Mac上使用已经很便利，但是并不完美，主要是每次都需要重新加载设置才能连接，而且设置的加载也不完整。于是萌生了自己写一个链接端的念头。
<p>程序使用Applescript编写，在Snow Leopard 10.6.1调试通过，程序前半部分通过调用终端实现ssh -D连接，后半部分通过curl调用twitter告诉大家你在&ldquo;为自由而奋斗&rdquo;，最后一句是语音反馈，告知你一切已经就绪。
<p>就那么简单。把这个脚本打包成app文件，放在dock上，点击一次就能实现ssh -D翻墙了，一切一切只需要一次点击，自由的曙光离我们越来越近了。
<p>下面提供程序给大家复制，大家可以根据自己的需要随意修改！祝你们好运！<br />
<blockquote>
<p><em>(*<br &#47;>Version 0.3<br &#47;>Code by Leask Huang<br &#47;><&#47;em><a href="http:&#47;&#47;www.leaskh.com"><em>http:&#47;&#47;www.leaskh.com<&#47;em><&#47;a><br &#47;><em>i@leaskh.com<br &#47;>*) <&#47;em>
<p><em>global ServerName<br &#47;>global LocalPorts<br &#47;>global UserName<br &#47;>global Passwd<br &#47;>set ServerName to "ssh.*****.com" -- Set ServerName<br &#47;>set LocalPort to "7070" -- Set LocalPorts<br &#47;>set UserName to "*****" -- Set UserName<br &#47;>set Passwd to "*****" -- Set Password<br &#47;>set SSHCommand to "nohup ssh -D " &amp; LocalPort &amp; " " &amp; UserName &amp; "@" &amp; ServerName<br &#47;>tell application "Terminal"<br &#47;>&nbsp;&nbsp;&nbsp; activate<br &#47;>&nbsp;&nbsp;&nbsp; do script "killall ssh" in window 1<br &#47;>&nbsp;&nbsp;&nbsp; do script "killall ssh-agent" in window 1<br &#47;>&nbsp;&nbsp;&nbsp; do script SSHCommand in window 1<br &#47;>&nbsp;&nbsp;&nbsp; delay 5<br &#47;>&nbsp;&nbsp;&nbsp; do script Passwd in window 1<br &#47;>&nbsp;&nbsp;&nbsp; quit<br &#47;>end tell <&#47;em>
<p><em>global TwitterUsername<br &#47;>global TwitterPassword<br &#47;>global TwitterLogin<br &#47;>global TwitterStatus<br &#47;>set TwitterUsername to "*****"<br &#47;>set TwitterPassword to "*****"<br &#47;>set TwitterLogin to quoted form of (TwitterUsername &amp; ":" &amp; TwitterPassword)<br &#47;>set TwitterStatus to quoted form of ("status=" &amp; "@Leaskh I am @" &amp; TwitterUsername &amp; " , and I am crossing the #GFW with #ssh -D now!")<br &#47;>do shell script "curl --user " &amp; TwitterLogin &amp; " --data-binary " &amp; TwitterStatus &amp; " <&#47;em><a href="https:&#47;&#47;twitter.com&#47;statuses&#47;update.json""><em>https:&#47;&#47;twitter.com&#47;statuses&#47;update.json"<&#47;em><&#47;a>
<p><em>say "Congratulations! Your Socks proxy over SSH dashes D has been successfully connected."<&#47;em><&#47;p><&#47;p><&#47;p><&#47;blockquote>  <&#47;div></p>
