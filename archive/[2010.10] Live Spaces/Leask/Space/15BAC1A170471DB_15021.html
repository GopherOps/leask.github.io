<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="stylesheet" type="text/css" href="style.css" /><title>&#22914;&#20309;&#20998;&#20139;ssh&#26032;&#40092;-D&#31354;&#27668;&#65311;</title></head><body><h1 id="blog-Title"><a href="index.html">&#35;import &#34;Leask.h&#34;</a></h1><div id="bp"><h2 id="bp-15BAC1A170471DB_15021-Title">&#22914;&#20309;&#20998;&#20139;ssh&#26032;&#40092;-D&#31354;&#27668;&#65311;</h2><h5 id="bp-15BAC1A170471DB_15021-publish">10/15/2009 3&#58;07&#58;06 PM</h5><div id="bp-15BAC1A170471DB_15021-content" class="blogpost"><p>很多人问我ssh -D的“新鲜空气”如何分享给别的计算机？又或者如何讲Mac Host Machine的ssh -D代理分享给VMware或者PD里面的虚拟机？</p> <p>其实稍稍想一下就能想到办法了。以我的例子说一下，望能抛砖引玉。</p> <p>我的ssh -D在Mac上建立，我想在VM里用IE看“外贸网站”。</p> <p>首先我们明确一点，IE是不支持通过Socks代理打开网页的，所以我们需要把Socks代理转化为IE能够识别的HTTP代理。工具上理论上用Privoxy或者SocksCap都可以的。但是Privoxy支持配置文件，能够智能选择那些通过Privoxy，那些不通过Privoxy，所以我选择了它。</p> <p>这里主要考虑到ssh -D主机大多都是算流量的，所以能不通过ssh -D的站点还是直接连接比较划算，Privoxy就提供这个可能性。</p> <p>看图（我不解释了，有心人一下子就看明白了）：</p> <p><img style="border-bottom&#58;0px;border-left&#58;0px;display&#58;inline;border-top&#58;0px;border-right&#58;0px" title="Screen shot 2009-10-15 at 2.49.16 PM" border="0" alt="Screen shot 2009-10-15 at 2.49.16 PM" src="img/15BAC1A170471DB_15021_0.jpg" width="644" height="404" /> </p> <p>当然，如果你需要看的“外贸网站”比较多，你可以用pac文件做一下智能筛选。pac文件如何写？在终端执行：</p> <p><em>       curl </em><a href="https&#58;//dl.getdropbox.com/u/873345/download/gfwlist.pac"><em>https&#58;//dl.getdropbox.com/u/873345/download/gfwlist.pac</em></a></p> <p>你就能得到一个很好的范例（基本上是Javascript的语法），这个pac文件也能附加到IE的代理设置里面：</p> <p><img style="border-bottom&#58;0px;border-left&#58;0px;display&#58;inline;border-top&#58;0px;border-right&#58;0px" title="Screen shot 2009-10-15 at 2.52.03 PM" border="0" alt="Screen shot 2009-10-15 at 2.52.03 PM" src="img/15BAC1A170471DB_15021_1.jpg" width="591" height="734" /> </p> <p>祝大家好运！</p>  </div><h3>Comments</h3><div id="bp-15BAC1A170471DB_15021-comments" class="comments"></div></div></body></html>