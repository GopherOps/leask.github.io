<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="stylesheet" type="text/css" href="style.css" /><title>&#22312;Mac&#19978;&#36890;&#36807;Terminal&#25130;&#21462;&#32593;&#39029;&#20840;&#22270; / Full Page Screenshots by Terminal On a Mac</title></head><body><h1 id="blog-Title"><a href="index.html">&#35;import &#34;Leask.h&#34;</a></h1><div id="bp"><h2 id="bp-15BAC1A170471DB_15092-Title">&#22312;Mac&#19978;&#36890;&#36807;Terminal&#25130;&#21462;&#32593;&#39029;&#20840;&#22270; / Full Page Screenshots by Terminal On a Mac</h2><h5 id="bp-15BAC1A170471DB_15092-publish">11/6/2009 10&#58;49&#58;38 PM</h5><div id="bp-15BAC1A170471DB_15092-content" class="blogpost"><p>其实很多人都知道，如果说Snow Leopard和Windows 7的图形界面是可口的点心的话，那么在*nix系统里面，命令行Shell简直就是系统的灵魂。</p> <p>笔者是从事网站开发和设计的，俗称的D&amp;D（Design and Development），经常遇到需要把制作效果汇报给上级，或者发Demo给客户的情况。然而由于Web pages脱离了Web server通常是无法完整预览的，这就需要截图了。</p> <p>Mac上截图是很方便的，系统自带的截图功能就异常强大（和Windows上残废的截图功能无法类比），而且通过便利的热键就能使用。关键是Mac上的截图工具并不能截取网页的全图，也就是遇到你的网页尺寸大于你的浏览器窗口尺寸的时候，就无能为力了，难不成还要开个Photoshop来拼接？这样做很山寨，一点都不专业，而且效率相当低。于是我也尝试过使用Paparazzi和Little Snapper。说实话，这两个软件都是很优秀的，特别是华丽的Little Snapper，但是那就需要多安装一个软件了，有没有什么环保一点的办法呢？</p> <p>经过一番研究，其实是有的，就是使用基于python的webkit2png，然而事实上Paparazzi和Little Snapper都是基于webkit2png项目的。<br />webkit2png可以在这里下载到：<a title="http&#58;//www.paulhammond.org/webkit2png/" href="http&#58;//www.paulhammond.org/webkit2png/">http&#58;//www.paulhammond.org/webkit2png/</a><br />如果你和我一样，有命令行癖，那么打开Terminal，使用CURL获取，命令如下：</p> <blockquote> <p><em>curl </em><a href="http&#58;//www.paulhammond.org/2009/03/webkit2png-0.5/webkit2png-0.5.txt"><em>http&#58;//www.paulhammond.org/2009/03/webkit2png-0.5/webkit2png-0.5.txt</em></a><em> &gt; webkit2png</em></p></blockquote> <p>于是你就得到webkit2png了。怎么用呢？<br />首先检查你的系统，你必须使用Mac OS X 10.2或以上系统，Safari 1.0或以上，PyObjC库1.1或以上。当然了，如果你的系统是Mac OS X 10.5 Leopard或更高版本，那么以上所有组件，你都已经安装过上了。如果不满足条件，可以升级Safari，并下载PyObjC的源代码自己编译。</p> <p>webkit2png的使用很简单，Terminal执行：</p> <blockquote> <p><em>python /Users/Leask/webkit2png </em><a href="http&#58;//www.leaskh.com/"><em>http&#58;//www.leaskh.com/</em></a></p></blockquote> <p>执行效果如下：<br /><img style="border-bottom&#58;0px;border-left&#58;0px;display&#58;inline;border-top&#58;0px;border-right&#58;0px" title="Screen shot 2009-11-06 at 9.57.57 PM" border="0" alt="Screen shot 2009-11-06 at 9.57.57 PM" src="img/15BAC1A170471DB_15092_0.jpg" width="585" height="422" /> <br />然后你就会发现网页已经被截图放在你的home文件夹了。</p> <p>当然你还可以通过参数控制webkit2png的行为，你可以通过 <em>--help</em> 获得以下使用帮助：</p> <blockquote> <p><em>Flora&#58;~ Leask$ python /Users/Leask/webkit2png --help<br />Usage&#58; webkit2png [options] [</em><a href="http&#58;//example.net/"><em>http&#58;//example.net/</em></a><em> ...] </em> <p><em>examples&#58;<br />webkit2png </em><a href="http&#58;//google.com/"><em>http&#58;//google.com/</em></a><em>            # screengrab google<br />webkit2png -W 1000 -H 1000 </em><a href="http&#58;//google.com/"><em>http&#58;//google.com/</em></a><em> # bigger screengrab of google<br />webkit2png -T </em><a href="http&#58;//google.com/"><em>http&#58;//google.com/</em></a><em>         # just the thumbnail screengrab<br />webkit2png -TF </em><a href="http&#58;//google.com/"><em>http&#58;//google.com/</em></a><em>        # just thumbnail and fullsize grab<br />webkit2png -o foo </em><a href="http&#58;//google.com/"><em>http&#58;//google.com/</em></a><em>     # save images as &quot;foo-thumb.png&quot; etc<br />webkit2png -                             # screengrab urls from stdin<br />webkit2png -h | less                     # full documentation </em> <p><em>Options&#58;<br />  --version             show program's version number and exit<br />  -h, --help            show this help message and exit<br />  -W WIDTH, --width=WIDTH<br />                        initial (and minimum) width of browser (default&#58; 800)<br />  -H HEIGHT, --height=HEIGHT<br />                        initial (and minimum) height of browser (default&#58; 600)<br />  --clipwidth=WIDTH     width of clipped thumbnail (default&#58; 200)<br />  --clipheight=HEIGHT   height of clipped thumbnail (default&#58; 150)<br />  -s SCALE, --scale=SCALE<br />                        scale factor for thumbnails (default&#58; 0.25)<br />  -m, --md5             use md5 hash for filename (like del.icio.us)<br />  -o NAME, --filename=NAME<br />                        save images as NAME-full.png,NAME-thumb.png etc<br />  -F, --fullsize        only create fullsize screenshot<br />  -T, --thumb           only create thumbnail sreenshot<br />  -C, --clipped         only create clipped thumbnail screenshot<br />  -d, --datestamp       include date in filename<br />  -D DIR, --dir=DIR     directory to place images into<br />  --delay=DELAY         delay between page load finishing and screenshot<br />  --noimages            don't load images</em></p></p></blockquote> <p>这里我就不一一翻译了。如果你懂一点Shell Script语言，还可以把这个命令再封装一下，例如我就把这个命令封装为：</p> <blockquote> <p><em>websnap [URL]</em></p></blockquote> <p>的形式，很便利地得到截图，如输入：</p> <blockquote> <p><em>websnap </em><a href="http&#58;//www.leaskh.com"><em><a href="http&#58;//www.leaskh.com/">http&#58;//www.leaskh.com</a></em></a>/</p></blockquote> <p>至于Shell Script怎么写？也不难，Unix和Linux上的Shell Script其实都大致一样，如：</p> <blockquote> <p><em>#!/bin/bash<br />echo &quot;Leask's WebSnap based on webkit2png&quot;<br />echo &quot;&quot;<br />python /Users/Leask/webkit2png $1;<br />exit;</em></p></blockquote> <p>保存上面的代码片段为以websnap为名文件，注意以上的Leask为我的用户名，你还需要自己改为自己的用户名呢。放脚本的目录和脚本本身都需要有执行权限。</p> <p>就先写这些吧，Enjoy。</p> <p>// 如果你是Linux用户，你通常没有Webkit，那么你有Firefox就可以了，Google一下另外一个基于Mozilla Firefox的项目叫做khtml2png，和webkit2png大同小异。</p>  </div><h3>Comments</h3><div id="bp-15BAC1A170471DB_15092-comments" class="comments"></div></div></body></html>